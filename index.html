<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema ISO 9001</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<header>
  <h1>Gesti√≥n de Calidad - ISO 9001</h1>
  <p>Implementaci√≥n ‚Ä¢ Capacitaci√≥n ‚Ä¢ Auditor√≠a</p>
</header>

<div class="container">
  <button onclick="toggleContent('impl')">Implementaci√≥n</button>
  <button onclick="toggleContent('cap')">Capacitaci√≥n</button>
  <button onclick="toggleContent('aud')">Auditor√≠a</button>

  <!-- Implementaci√≥n -->
  <div id="impl" class="content">
    <h2>Implementaci√≥n</h2>
    <p>Documentos:</p>
    <ul>
      <li>Diagn√≥stico inicial de brechas respecto a la norma.</li>
      <li>Definici√≥n de la pol√≠tica y los objetivos de calidad.</li>
      <li>Documentaci√≥n de procesos, procedimientos e indicadores.</li>
      <li>Establecimiento de controles y responsabilidades.</li>
      <li>Integraci√≥n de la gesti√≥n de calidad en la operaci√≥n diaria.</li>
    </ul>
    <p><b>Subir archivos:</b></p>
    <input type="file" id="fileInput" multiple>
    <div id="fileList"></div>
  </div>

  <!-- Capacitaci√≥n -->
  <div id="cap" class="content">
    <h2>Capacitaci√≥n</h2>
    <p>Temas principales:</p>
    <ul>
      <li>Formaci√≥n en la norma ISO 9001 y sus requisitos.</li>
      <li>Capacitaci√≥n en procedimientos, roles y responsabilidades.</li>
      <li>Sensibilizaci√≥n sobre la importancia de la satisfacci√≥n del cliente y la mejora continua.</li>
      <li>Entrenamiento en herramientas de control y medici√≥n de procesos.</li>
    </ul>

    <h3>Progreso de Capacitaci√≥n</h3>
    <div class="progress-container">
      <!-- ‚úÖ CORRECCI√ìN: quitar el '/' extra -->
      <div id="progress-bar">0%</div>
    </div>

    <!-- üëâ Formulario de inicio -->
    <div id="startSection">
      <p><b>Ingresa tu nombre para iniciar la capacitaci√≥n:</b></p>
      <input type="text" id="participantName" placeholder="Tu nombre aqu√≠">
      <button onclick="startTraining()">Iniciar Capacitaci√≥n</button>
    </div>

    <!-- Mensaje de bienvenida (se muestra al iniciar) -->
    <p id="welcomeMessage" style="display:none; font-weight:bold; margin-top:10px;"></p>

    <!-- üëâ Cuestionario oculto hasta que inicie -->
    <div id="quiz" style="display:none;">
      <!-- Pregunta 1 -->
      <div class="question">
        <p><b>Pregunta 1:</b> ¬øCu√°l es el objetivo principal de la norma ISO 9001?</p>
        <button onclick="checkAnswer(1,'a')">a) Reducir costos de producci√≥n</button>
        <button onclick="checkAnswer(1,'b')">b) Asegurar la satisfacci√≥n del cliente y mejora continua</button>
        <button onclick="checkAnswer(1,'c')">c) Incrementar ventas</button>
        <p id="quizResult1"></p>
      </div>

      <!-- Pregunta 2 -->
      <div class="question" style="display:none;">
        <p><b>Pregunta 2:</b> ¬øQu√© deben conocer todos los empleados en un sistema ISO 9001?</p>
        <button onclick="checkAnswer(2,'a')">a) Su rol y responsabilidades dentro del sistema</button>
        <button onclick="checkAnswer(2,'b')">b) El sueldo de sus compa√±eros</button>
        <button onclick="checkAnswer(2,'c')">c) Los proyectos de la competencia</button>
        <p id="quizResult2"></p>
      </div>

      <!-- Pregunta 3 -->
      <div class="question" style="display:none;">
        <p><b>Pregunta 3:</b> ¬øQu√© se busca con la capacitaci√≥n en ISO 9001?</p>
        <button onclick="checkAnswer(3,'a')">a) Cumplir solo con requisitos legales</button>
        <button onclick="checkAnswer(3,'b')">b) Sensibilizar y fortalecer la mejora continua</button>
        <button onclick="checkAnswer(3,'c')">c) Evitar auditor√≠as externas</button>
        <p id="quizResult3"></p>
      </div>

      <!-- Pregunta 4 -->
      <div class="question" style="display:none;">
        <p><b>Pregunta 4:</b> ¬øQu√© herramienta se utiliza para medir el desempe√±o de procesos?</p>
        <button onclick="checkAnswer(4,'a')">a) Indicadores de gesti√≥n</button>
        <button onclick="checkAnswer(4,'b')">b) Opiniones personales</button>
        <button onclick="checkAnswer(4,'c')">c) Redes sociales</button>
        <p id="quizResult4"></p>
      </div>
    </div>

    <h3 id="finalMessage" style="display:none; color:green;">
      üéâ ¬°Felicidades! Has completado la capacitaci√≥n al 100%.
    </h3>

    <!-- Bot√≥n para descargar certificado -->
    <button id="downloadCert" style="display:none;" onclick="generateCertificate()">
      üìú Descargar Certificado
    </button>
  </div>


  <!-- Auditor√≠a -->
  <div id="aud" class="content">
    <h2>Auditor√≠a</h2>
    <p>Registra hallazgos, asigna acciones correctivas y controla el cierre.</p>

    <!-- Formulario para agregar hallazgo -->
    <div class="audit-form">
      <h3>Registrar hallazgo</h3>
      <label>Tipo:
        <select id="auditType">
          <option value="Interna">Interna</option>
          <option value="Externa">Externa</option>
        </select>
      </label>

      <label>T√≠tulo:
        <input type="text" id="auditTitle" placeholder="T√≠tulo del hallazgo">
      </label>

      <label>Descripci√≥n:
        <textarea id="auditDesc" rows="3" placeholder="Breve descripci√≥n"></textarea>
      </label>

      <label>Severidad:
        <select id="auditSeverity">
          <option value="Mayor">Mayor</option>
          <option value="Menor">Menor</option>
          <option value="Oportunidad">Oportunidad de mejora</option>
        </select>
      </label>

      <label>Responsable:
        <input type="text" id="auditOwner" placeholder="Nombre del responsable">
      </label>

      <label>Fecha l√≠mite:
        <input type="date" id="auditDue">
      </label>

      <div class="audit-form-actions">
        <button id="addAuditBtn">A√±adir hallazgo</button>
        <button id="clearAuditBtn" class="secondary">Limpiar formulario</button>
      </div>
    </div>

    <!-- Estad√≠sticas -->
    <div class="audit-stats">
      <h3>Estad√≠sticas</h3>
      <div class="stat-row">
        <div class="stat-item">
          <div class="stat-label">Total hallazgos</div>
          <div id="statTotal">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Abiertos</div>
          <div id="statOpen">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Cerrados</div>
          <div id="statClosed">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">En seguimiento (vencidos)</div>
          <div id="statOverdue">0</div>
        </div>
      </div>

      <div class="progress-bars">
        <div class="progress-label">Conformidad (cerrados)</div>
        <div class="small-progress">
          <div id="barClosed" class="small-progress-fill">0%</div>
        </div>

        <div class="progress-label">No conformidades (abiertos)</div>
        <div class="small-progress">
          <div id="barOpen" class="small-progress-fill">0%</div>
        </div>
      </div>
    </div>

    <!-- Tabla de hallazgos -->
    <div class="audit-table">
      <h3>Hallazgos</h3>
      <table id="auditTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Tipo</th>
            <th>T√≠tulo</th>
            <th>Severidad</th>
            <th>Responsable</th>
            <th>Vence</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <!-- filas generadas por JS -->
        </tbody>
      </table>
      <p id="noFindings" style="display:none;">No hay hallazgos registrados.</p>
    </div>
  </div>

</div>

<script src="script.js"></script>
</body>
</html>
